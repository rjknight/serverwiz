<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<meta name="GENERATOR" content="Pod::HtmlEasy/0.07 Perl/5.020001 [MSWin32]">
<title>Targets.pm</title>
<style type="text/css">
<!--

BODY {
  background: white;
  color: black;
  font-family: arial,sans-serif;
  margin: 0;
  padding: 1ex;
}
TABLE {
  border-collapse: collapse;
  border-spacing: 0;
  border-width: 0;
  color: inherit;
}
IMG { border: 0; }
FORM { margin: 0; }
input { margin: 2px; }
A.fred {
  text-decoration: none;
}
A:link, A:visited {
  background: transparent;
  color: #006699;
}
TD {
  margin: 0;
  padding: 0;
}
DIV {
  border-width: 0;
}
DT {
  margin-top: 1em;
}
TH {
  background: #bbbbbb;
  color: inherit;
  padding: 0.4ex 1ex;
  text-align: left;
}
TH A:link, TH A:visited {
  background: transparent;
  color: black;
}
A.m:link, A.m:visited {
  background: #006699;
  color: white;
  font: bold 10pt Arial,Helvetica,sans-serif;
  text-decoration: none;
}
A.o:link, A.o:visited {
  background: #006699;
  color: #ccffcc;
  font: bold 10pt Arial,Helvetica,sans-serif;
  text-decoration: none;
}
A.o:hover {
  background: transparent;
  color: #ff6600;
  text-decoration: underline;
}
A.m:hover {
  background: transparent;
  color: #ff6600;
  text-decoration: underline;
}
table.dlsip     {
  background: #dddddd;
  border: 0.4ex solid #dddddd;
}
.pod PRE     {
  background: #eeeeee;
  border: 1px solid #888888;
  color: black;
  padding-top: 1em;
  white-space: pre;
}
.pod H1      {
  background: transparent;
  color: #006699;
  font-size: large;
}
.pod H2      {
  background: transparent;
  color: #006699;
  font-size: medium;
}
.pod IMG     {
  vertical-align: top;
}
.pod .toc A  {
  text-decoration: none;
}
.pod .toc LI {
  line-height: 1.2em;
  list-style-type: none;
}

--></style>
</head>
<body alink="#FF0000" bgcolor="#FFFFFF" link="#000000" text="#000000" vlink="#000066"><a name='_top'></a>

<div class="toc">
<ul>
<li><a href='#NAME'>NAME</a>
<li><a href='#SYNOPSIS'>SYNOPSIS</a>
<li><a href='#DESCRIPTION'>DESCRIPTION</a>
<li><a href='#OVERVIEW'>OVERVIEW</a>
<li><a href='#CONSTRUCTOR'>CONSTRUCTOR</a>
<li><a href='#METHODS'>METHODS</a>
<li><a href='#CREDITS'>CREDITS</a>

</ul>
</div>

<div class='pod'><div>
<a name='NAME'></a><h1>NAME</h1>

<p>Targets</p>
<a name='SYNOPSIS'></a><h1>SYNOPSIS</h1>

<pre>    use Targets;

    my $targets = Targets-&gt;new;
    $targets-&gt;loadXML("myfile.xml");
    foreach my $target ( sort keys %{ $targets-&gt;getAllTargets() } ) {
        ## do stuff with targets
    }

    $targets-&gt;printXML( $file_handle, "top" );

</pre>
<a name='DESCRIPTION'></a><h1>DESCRIPTION</h1>

<p><font face='Courier New'>Targets</font> is a class that consumes XML generated by ServerWiz2.  The XML
describes a POWER system topology including nodes, cards, chips, and busses.</p>
<a name='OVERVIEW'></a><h1>OVERVIEW</h1>

<p>A simple example of a ServerWiz2 topology would be:</p>
<ul>
<li><a name='Topology-Example-'></a><b>Topology Example:</b></li>
<pre>   -system
      -node
         -motherboard
           -processor
           -pcie card
               - daughtercard
                  - memory buffer
                  - dimms

</pre>
</ul>
<p>Targets-&gt;loadXML("myfile.xml") reads this topology and creates 2 data
structures.  One data structure simply represents the hierarchical system
topology.  The other data structure represents the hierarchical structure
that hostboot expects (affinity path).</p>
<p>Unlike hostboot, everything in ServerWiz2 is represented as a target.
For example, FSI and I2C units are targets under the processor that have a
bus type and therefore allow connections to be made.</p>
<a name='CONSTRUCTOR'></a><h1>CONSTRUCTOR</h1>

<ul>
<li><a name='new---'></a><b>new ()</b></li>
<p>There are no arguments for the constructor.</p>
</ul>
<a name='METHODS'></a><h1>METHODS</h1>

<p><font face='Courier New'>TARGET</font> is a pointer to data structure containing all target information.
<font face='Courier New'>TARGET_STRING</font> is the hierarchical target string used as key for data
structure.  An example for <font face='Courier New'>TARGET_STRING</font> would be:
<font face='Courier New'>/sys-0/node-0/motherboard-0/dimm-0</font></p>
<ul>
<li><a name='loadXml--FILENAME-'></a><b>loadXml (<font face='Courier New'>FILENAME</font>)</b></li>
<p>Reads ServerWiz2 XML <font face='Courier New'>FILENAME</font> and stores into a data structure for
manipulation and printing.</p>
<li><a name='getTarget-TARGET_STRING-'></a><b>getTarget(<font face='Courier New'>TARGET_STRING</font>)</b></li>
<p>Returns pointer to data structure (<font face='Courier New'>TARGET</font>)</p>
<li><a name='getAllTargets-TARGET_STRING-'></a><b>getAllTargets(<font face='Courier New'>TARGET_STRING</font>)</b></li>
<p>Returns array with all existing target data structures</p>
<li><a name='getTargetParent-TARGET_STRING-'></a><b>getTargetParent(<font face='Courier New'>TARGET_STRING</font>)</b></li>
<p>Returns <font face='Courier New'>TARGET_STRING</font> of parent target</p>
<li><a name='getNumConnections-TARGET_STRING-'></a><b>getNumConnections(<font face='Courier New'>TARGET_STRING</font>)</b></li>
<p>Returns the number of bus connections to this target</p>
<li><a name='getFirstConnectionDestination-TARGET_STRING-'></a><b>getFirstConnectionDestination(<font face='Courier New'>TARGET_STRING</font>)</b></li>
<p>Returns the target string of the first target found connected to
<font face='Courier New'>TARGET_STRING</font>.  This is useful because many busses are guaranteed
to only have one connection because they are point to point.</p>
<li><a name='getFirstConnectionBus-TARGET_STRING-'></a><b>getFirstConnectionBus(<font face='Courier New'>TARGET_STRING</font>)</b></li>
<p>Returns the data structure of the bus of the first target found connected to
<font face='Courier New'>TARGET_STRING</font>.  The bus data structure is also a target with attributes.</p>
<li><a name='getConnectionDestination-TARGET_STRING-INDEX-'></a><b>getConnectionDestination(<font face='Courier New'>TARGET_STRING</font>,<font face='Courier New'>INDEX</font>)</b></li>
<p>Returns the target string of the <font face='Courier New'>INDEX</font> target found connected to
<font face='Courier New'>TARGET_STRING</font>.</p>
<li><a name='getConnectionBus-TARGET_STRING-'></a><b>getConnectionBus(<font face='Courier New'>TARGET_STRING</font>)</b></li>
<p>Returns the data structure of the <font face='Courier New'>INDEX</font> bus target found connected to
<font face='Courier New'>TARGET_STRING</font>.</p>
<li><a name='findEndpoint-TARGET_STRING-BUS_TYPE-ENDPOINT_MRW_TYPE-'></a><b>findEndpoint(<font face='Courier New'>TARGET_STRING</font>,<font face='Courier New'>BUS_TYPE</font>,<font face='Courier New'>ENDPOINT_MRW_TYPE</font>)</b></li>
<p>Searches through all connections to <font face='Courier New'>TARGET_STRING</font>
for a endpoint <font face='Courier New'>MRW_TYPE</font> and <font face='Courier New'>BUS_TYPE</font></p>
<li><a name='getBusType-TARGET_STRING-'></a><b>getBusType(<font face='Courier New'>TARGET_STRING</font>)</b></li>
<p>Returns the BUS_TYPE attribute of (<font face='Courier New'>TARGET_STRING</font>).  Examples are I2C and DMI.</p>
<li><a name='getType-TARGET_STRING-'></a><b>getType(<font face='Courier New'>TARGET_STRING</font>)</b></li>
<p>Returns the TYPE attribute of (<font face='Courier New'>TARGET_STRING</font>).
Examples are PROC and MEMBUF.</p>
<li><a name='getMrwType-TARGET_STRING-'></a><b>getMrwType(<font face='Courier New'>TARGET_STRING</font>)</b></li>
<p>Returns the MRW_TYPE attribute of (<font face='Courier New'>TARGET_STRING</font>).
Examples are CARD and PCI_CONFIG.  This
is an extension to the TYPE attribute and are types that hostboot does
not care about.</p>
<li><a name='getTargetType-TARGET_STRING-'></a><b>getTargetType(<font face='Courier New'>TARGET_STRING</font>)</b></li>
<p>Returns the target type id of (<font face='Courier New'>TARGET_STRING</font>).
This is not the TYPE attribute.  This is the
&lt;id&gt; from target_types.xml.  Examples are unit-pci-power8 and enc-node-power8.</p>
<li><a name='isBadAttribute-TARGET_STRING-ATTRIBUTE_NAME-'></a><b>isBadAttribute(<font face='Courier New'>TARGET_STRING</font>,<font face='Courier New'>ATTRIBUTE_NAME</font>)</b></li>
<p>Tests where attribute (<font face='Courier New'>ATTRIBUTE_NAME</font>) has been set in
target (<font face='Courier New'>TARGET_STRING</font>).  Returns true if attribute is undefined or empty
and false if attribute is defined and not empty.</p>
<li><a name='getAttribute-TARGET_STRING-ATTRIBUTE_NAME-'></a><b>getAttribute(<font face='Courier New'>TARGET_STRING</font>,<font face='Courier New'>ATTRIBUTE_NAME</font>)</b></li>
<p>Returns the value of attribute <font face='Courier New'>ATTRIBUTE_NAME</font> in target <font face='Courier New'>TARGET_STRING</font>.</p>
<li><a name='renameAttribute-TARGET_STRING-ATTRIBUTE_OLDNAME--ATTRIBUTE_OLDNAME-'></a><b>renameAttribute(<font face='Courier New'>TARGET_STRING</font>,<font face='Courier New'>ATTRIBUTE_OLDNAME</font>,
<font face='Courier New'>ATTRIBUTE_OLDNAME</font>)</b></li>
<p>Renames attribute <font face='Courier New'>ATTRIBUTE_OLDNAME</font> to <font face='Courier New'>ATTRIBUTE_NEWNAME</font> in target
<font face='Courier New'>TARGET_STRING</font>.</p>
<li><a name='setAttribute-TARGET_STRING-ATTRIBUTE_NAME-VALUE-'></a><b>setAttribute(<font face='Courier New'>TARGET_STRING</font>,<font face='Courier New'>ATTRIBUTE_NAME</font>,<font face='Courier New'>VALUE</font>)</b></li>
<p>Sets attribute <font face='Courier New'>ATTRIBUTE_NAME</font> of target <font face='Courier New'>TARGET_STRING</font> to value <font face='Courier New'>VALUE</font>.</p>
<li><a name='setAttributeField-TARGET_STRING-ATTRIBUTE_NAME-FIELD-VALUE-'></a><b>setAttributeField(<font face='Courier New'>TARGET_STRING</font>,<font face='Courier New'>ATTRIBUTE_NAME</font>,<font face='Courier New'>FIELD</font>,<font face='Courier New'>VALUE</font>)</b></li>
<p>Sets attribute <font face='Courier New'>ATTRIBUTE_NAME</font> and field <font face='Courier New'>FIELD</font> of target <font face='Courier New'>TARGET_STRING</font>
to value <font face='Courier New'>VALUE</font>.  This is for complex attributes.</p>
<li><a name='getBusAttribute-TARGET_STRING-INDEX-ATTRIBUTE_NAME-'></a><b>getBusAttribute(<font face='Courier New'>TARGET_STRING</font>,<font face='Courier New'>INDEX</font>,<font face='Courier New'>ATTRIBUTE_NAME</font>)</b></li>
<p>Gets the attribute <font face='Courier New'>ATTRIBUTE_NAME</font> from bus <font face='Courier New'>TARGET_STRING</font> bus number
<font face='Courier New'>INDEX</font>.</p>
<li><a name='getTargetChildren-TARGET_STRING-'></a><b>getTargetChildren(<font face='Courier New'>TARGET_STRING</font>)</b></li>
<p>Returns an array of target strings representing all the children of target
<font face='Courier New'>TARGET_STRING</font>.</p>
<li><a name='getEnumValue-ENUM_TYPE-ENUM_NAME-'></a><b>getEnumValue(<font face='Courier New'>ENUM_TYPE</font>,<font face='Courier New'>ENUM_NAME</font>)</b></li>
<p>Returns the enum value of type <font face='Courier New'>ENUM_TYPE</font> and name <font face='Courier New'>ENUM_NAME</font>.  The
enumerations are also defined in ServerWiz2 XML output and are directly
copied from attribute_types.xml.</p>
<li><a name='getMasterProc--'></a><b>getMasterProc()</b></li>
<p>Returns the target string of the master processor.</p>
<li><a name='myExit-EXIT_NUM-'></a><b>myExit(<font face='Courier New'>EXIT_NUM</font>)</b></li>
<p>Calls exit(<font face='Courier New'>EXIT_NUM</font>) when force flag is not set.</p>
<li><a name='log-TARGET_STRING-MESSAGE-'></a><b>log(<font face='Courier New'>TARGET_STRING</font>,<font face='Courier New'>MESSAGE</font>)</b></li>
<p>Prints to stdout log message is debug mode is turned on.</p>
</ul>
<a name='CREDITS'></a><h1>CREDITS</h1>

<p>Norman James &lt;<a href='mailto:njames@us.ibm.com'>njames@us.ibm.com</a>&gt;</p>


<div></div></body></html>
